# 减法器

## 补码

计算机中的**补码**是表示带符号整数的一种方法，它在计算机中被广泛用于进行加法、减法等运算。补码的引入，使得计算机能够用统一的方式处理正数和负数的运算，同时避免了传统的符号位处理方式可能带来的复杂性。

### 补码的定义：

1. ​**原码（Signed magnitude）** ​：一种表示整数的方法，其中最高位（符号位）表示数值的正负，0表示正数，1表示负数，其余位表示数值的绝对值。例如，8位二进制的+5可以表示为
   `00000101`，-5表示为`10000101`。
2. ​**反码（Ones‘ complement）**​ ：负数的表示方法是对原码取反，正数不变。举例来说，+5的原码是`00000101`，它的反码也是
   `00000101`；而-5的原码是`10000101`，其反码为`11111010`。
3. ​**补码（Two's complement）**​ ：负数的表示方法是在反码的基础上加1。正数和零的补码与原码相同。补码的最大优点是可以用同一电路处理加法和减法运算，无需区分符号。

### 补码的生成方法：

假设你有一个整数 `x`，并且你要将它转换为补码，步骤如下：

* 对于正数，补码与原码相同。
* 对于负数：
  1. 首先找出该负数的原码。
  2. 然后对其原码做反码（即所有的位取反）。
  3. 最后在反码的基础上加1，得到补码。

例如，8位系统下：

* +5 的补码：`00000101`。
* -5 的补码：
  1. 先写出原码：`10000101`。
  2. 反码：`11111010`。
  3. 补码：`11111011`。

### 补码的特点：

1. ​**零的表示**​：补码可以统一表示零，只有一个零的补码（`00000000`），不会像原码和反码中有正零和负零的区别。
2. ​**计算方便**​：补码使得计算机的加法和减法运算可以统一使用加法电路，不需要专门的符号处理，这简化了硬件设计。
3. ​**符号扩展**​：当你需要将一个补码数从较小的位数扩展到较大的位数时，需要保持符号位的一致性，这样才能确保负数不会改变。例如，将8位补码的-5扩展到16位时，结果是
   `11111111 11111011`。

### 补码电路：

补码的加法和减法是通过标准的二进制加法电路来实现的，通常包括：

1. ​**加法器**​：计算机中的加法通常通过全加器实现，可以将两个二进制数相加并计算进位。
2. ​**反码与补码生成**​：如果要进行减法操作（如`a - b`），实际上可以将`b`的补码加到`a`
   上，这样就不需要专门的减法电路了。为此，我们需要使用反码生成电路（用于负数的补码计算）。

#### 补码加法器（加法电路）：

* 通过全加器进行逐位加法，计算每一位的和和进位。
* 在处理符号位时，补码使得加法和减法运算无需额外的判断符号。
* 当加法器产生溢出时，可能需要将溢出位丢弃。

### 举个例子：

假设我们需要在一个8位系统中进行 `+5` 与 `-3` 的加法：

* +5 的补码是：`00000101`
* -3 的补码是：`11111101`（步骤与上面提到的补码生成方法类似）

加法器对这两个补码进行加法运算：

```
00000101
+ 11111101
-----------
  00000010（结果是+2）
```

加法器计算出来的结果就是 `+2`，这是因为补码加法的规则使得计算简化了。

### 总结：

补码是计算机中表示带符号整数的常用方法，它的关键在于可以通过简单的加法器电路来处理所有的加法和减法运算，同时避免了原码和反码中的复杂性。补码使得计算机能够高效地处理负数与正数，广泛应用于各种计算机系统中。

## 取反电路

对于一位取反器来说，我们用 $E$ 和 $ I $ 和 $ O $ 分别表示是否取反，输入位，输出位，那么取反器的真值表如下：

| $E$ | $I$ | $O$ |
|-----|-----|-----|
| 0   | 0   | 0   |
| 0   | 1   | 1   |
| 1   | 0   | 1   |
| 1   | 1   | 0   |

可以看到，$E$ 和 $I$ 和 $O$ 之间就是一个异或关系，即：

$$
E \oplus I = O
$$

### 8 位取反电路

由于补码的存在，会导致加法溢出，所以进位就会失效，这里需要特殊处理一下。定义 $CI$ 为 8 位取反电路中加法器的输入进位项，$CO$ 位加法器的输出进位项，$O$ 为最终加法器（减法）的最终进位项，通过加法器的定义可以知道下面的真值表（暂时不考虑输入为负数的情况）

|$CI$|$CO$|$O$|
|---|---|---|
|0|0|0|
|0|1|1|
|1|0|0|
|1|1|0|

通过真值表可以知道：

$$
\overline{CI} \cdot {CO} = {O}
$$


